---
batch_connect:
  template: "basic"
script:
  native:
<%- if OodAppkit.clusters[cluster].job_config[:adapter] == 'slurm' -%>
    - "-p"
    - "<%= slot_type %>"
    - "-N"
    - "1"
  <%- if slot_type == 'gpu' -%>
    - "-G"
    - "1"
  <%- end -%>
  <%- if slot_type == 'smallgpu' -%>
    - "-G"
    - "1"
  <%- end -%>
    - "--exclusive"
    - "--container-image=<%= container_image %>"
    - "--export=ALL"
  <%- if apptainer_arguments != "" -%>
    - "--apptainer-arguments=<%= apptainer_arguments %>"
  <%- end -%>
<%- else -%>
    - "-l"
    - "select=1:slot_type=<%= slot_type %>"
    - "-v"
    - "enroot=1"
<%- end -%>

